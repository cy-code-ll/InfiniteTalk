优先级规则
未充值用户（userLevel === 0）且有优惠券
显示：优惠券图标 + "X Free"
即使有赠送的积分，也优先显示优惠券
已充值用户（userLevel > 0）且有积分
显示：积分图标 + 积分数值
其他情况
显示：积分图标 + 0
显示示例
状态	积分	优惠券	用户等级	显示内容
未充值	50（赠送）	3	0	优惠券图标 + 3 Free
未充值	0	3	0	优惠券图标 + 3 Free
未充值	50（赠送）	0	0	积分图标 + 0
已充值	100	0	1	积分图标 + 100
已充值	100	3	1	积分图标 + 100
已充值	0	0	1	积分图标 + 0
关键改进
未充值用户（userLevel === 0）即使有赠送积分，也优先显示优惠券
已充值用户（userLevel > 0）显示积分，忽略优惠券
与 isUpgradeMode 逻辑一致：userLevel 是判断是否充值的主要依据









修改后的弹窗规则
新的判断逻辑
// 弹窗规则：// 1. 只在当前会话中弹一次（useRef 记录，避免轮询多次弹出）// 2. 未充值用户（level === 0）且有优惠券（free_times > 0）时弹窗// 3. 即使有赠送的积分，未充值用户也应该弹窗提醒有优惠券可用if (hasFreeVouchers && userLevel === 0 && !hasShownVoucherRef.current) {  // 弹窗}
主要变化
移除了 !hasCredits 条件
未充值用户（userLevel === 0）只要有优惠券（free_times > 0）就会弹窗
即使有赠送的积分，也会弹窗提醒
显示示例
状态	积分	优惠券	用户等级	是否弹窗	说明
未充值	0	3	0	✅ 弹窗	符合条件
未充值	50（赠送）	3	0	✅ 弹窗	即使有赠送积分也弹窗
未充值	0	0	0	❌ 不弹	没有优惠券
已充值	0	3	1	❌ 不弹	已充值用户
已充值	100	3	1	❌ 不弹	已充值用户
与 AuthIslandVisible 的一致性
AuthIslandVisible：未充值用户优先显示优惠券（即使有赠送积分）
UserProvider 弹窗：未充值用户有优惠券时弹窗提醒（即使有赠送积分）
两者逻辑一致：userLevel === 0 是判断是否充值的主要依据。